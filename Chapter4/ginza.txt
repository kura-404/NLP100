以下に、macOS + Python 3.9 + 仮想環境でGiNZA（ginza 5.1.2）を使って日本語解析するためのセットアップ手順を一通りまとめます。

⸻

✅ 0. 環境前提
	•	OS：macOS（LibreSSL環境）
	•	Python：3.9系（例：3.9.x）
	•	仮想環境使用：推奨（python3 -m venv .venv）

⸻

✅ 1. 仮想環境の作成と有効化

python3 -m venv .venv
source .venv/bin/activate


⸻

✅ 2. パッケージのインストール（互換性調整済み）

pip install -U pip
pip install spacy==3.4.4 ginza==5.1.2 numpy==1.23.5 thinc==8.1.7

※ numpy 2.x や thinc 8.1.12 では互換性エラーが起きるため、指定バージョンに固定。

⸻

✅ 3. モデル登録（ja_ginza名で使うためにリンク）

python -m spacy link ja_ginza ja_ginza

これにより、spacy.load("ja_ginza") が使用可能に。

⸻

✅ 4. 動作確認スクリプト（例：tmp.py）

import spacy

nlp = spacy.load("ja_ginza")
doc = nlp("彼は毎朝コーヒーを飲みます。")

for token in doc:
    print(token.text, token.lemma_, token.pos_, token.dep_, token.head.text)

実行：

python tmp.py


⸻

✅ 5. 補足情報

内容	状況
ginza.load()	v5系では削除。使えません
ja_ginza モデルDL	python -m spacy download ja_ginza は不要（失敗します）
spacy.load("ja_ginza")	spacy link でリンクすれば使える
LibreSSL 警告	macOS特有。無視して問題ありません


⸻

✅ 最終的なバージョン構成（pip listなどで確認可）

パッケージ	バージョン
spacy	3.4.4
ginza	5.1.2
numpy	1.23.5
thinc	8.1.7


⸻

✅ エラーが出る主なパターンと対処

エラー内容	原因	対処
Can't find model 'ja_ginza'	モデルが未リンク	spacy link ja_ginza ja_ginza
numpy dtype size changed	numpyとthincのABI不一致	numpy==1.23.5 + thinc==8.1.7
ginza.load() で AttributeError	ginza v5系	spacy.load("ja_ginza") に変更


⸻

必要であれば、これを README.md や .sh スクリプト化もできます。ご希望あればお知らせください。